openapi: 3.0.3
info:
  title: Today Agenda Is Survival API
  version: 1.0.0
  description: |
    í”„ë¡ íŠ¸ì—”ë“œê°€ í˜„ì¬ ë°±ì—”ë“œ ë¡œì§ì„ í•œëˆˆì— íŒŒì•…í•  ìˆ˜ ìˆë„ë¡
    ì‹¤ì œ ì»¨íŠ¸ë¡¤ëŸ¬/ì„œë¹„ìŠ¤ êµ¬í˜„ ê¸°ì¤€ìœ¼ë¡œ ì •ë¦¬í•œ API ëª…ì„¸ì…ë‹ˆë‹¤.
servers:
  - url: http://localhost:4000
    description: Local server
  - url: https://qltkek.shop
    description: Production server

tags:
  - name: Auth
    description: ì¸ì¦/ë¡œê·¸ì¸
  - name: Room
    description: ë°© ìƒì„±/ì°¸ì—¬/ì¡°íšŒ
  - name: Game
    description: ê²Œì„ ì‹œì‘ ë° ìƒíƒœ
  - name: Chapter
    description: ì±•í„°/ìŠ¤í† ë¦¬ ì§„í–‰
  - name: Vote
    description: íˆ¬í‘œ ê´€ë ¨
  - name: Final
    description: ìµœì¢… ê²°ê³¼ ì²˜ë¦¬
  - name: Leaderboard
    description: ë¦¬ë”ë³´ë“œ
  - name: ChaptersLegacy
    description: rooms + chapters ëª¨ë“ˆ ê¸°ë°˜(legacy) ì§ˆë¬¸ í”Œë¡œìš°

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    ErrorResponse:
      type: object
      properties:
        error:
          type: string
          example: "Unauthorized"

    Choice:
      type: string
      enum: [A, B]
      example: A

    HealthResponse:
      type: string
      example: ok

    Room:
      type: object
      properties:
        id:
          type: string
          example: "room-uuid"
        host_user_id:
          type: string
          example: "user-uuid"
        status:
          type: string
          example: WAITING
        capacity:
          type: integer
          example: 5
        created_at:
          type: string
          format: date-time

    RoomListItem:
      type: object
      properties:
        id:
          type: string
          example: "room-uuid"
        status:
          type: string
          example: WAITING
        capacity:
          type: integer
          example: 5
        current_qnum:
          type: integer
          nullable: true
          example: 2
        host_user_id:
          type: string
          example: "user-uuid"
        created_at:
          type: string
          format: date-time
        room_players:
          type: object
          properties:
            count:
              type: integer
              example: 3

    Player:
      type: object
      properties:
        id:
          type: string
          example: "player-uuid"
        room_id:
          type: string
          example: "room-uuid"
        user_id:
          type: string
          example: "user-uuid"
        nickname:
          type: string
          nullable: true
          example: "ë°©ì¥"
        score:
          type: number
          format: float
          example: 1.2
        joined_at:
          type: string
          format: date-time

    CreateRoomRequest:
      type: object
      required: [capacity, nickname]
      properties:
        capacity:
          type: integer
          description: í—ˆìš© ê°’: 3, 5, 7, 9
          example: 5
        nickname:
          type: string
          example: "ë°©ì¥"

    JoinRoomRequest:
      type: object
      required: [nickname]
      properties:
        nickname:
          type: string
          example: "ì°¸ê°€ì1"

    AuthTokens:
      type: object
      properties:
        access_token:
          type: string
        refresh_token:
          type: string

    AuthMeResponse:
      type: object
      properties:
        userId:
          type: string
          example: "user-uuid"
        email:
          type: string
          example: "user@example.com"

    GameState:
      type: object
      properties:
        room_id:
          type: string
          example: "room-uuid"
        phase:
          type: string
          enum: [IN_PROGRESS, FINAL_VOTE, FINISHED]
        current_chapter_order:
          type: integer
          nullable: true
          example: 2
        started_at:
          type: string
          format: date-time
          nullable: true
        finished_at:
          type: string
          format: date-time
          nullable: true

    Chapter:
      type: object
      properties:
        id:
          type: string
          example: "chapter-uuid"
        room_id:
          type: string
          example: "room-uuid"
        order:
          type: integer
          example: 1
        title:
          type: string
          example: "Expedition Selection"
        description:
          type: string
          example: "ì¬ì›ì„ ë‹¤ì‹œ ì›ì •ëŒ€ë¡œ ë³´ë‚´ì•¼ í• ê¹Œ?"
        option_a_label:
          type: string
          example: "ëŠ¥ë ¥ ê¸°ë°˜ ì¬íŒŒê²¬ (Seongyeol)"
        option_b_label:
          type: string
          example: "ì¶”ì²¨/ìˆœí™˜ ì‹œìŠ¤í…œ (Jaemyeon)"

    VoteRequest:
      type: object
      required: [choice]
      properties:
        choice:
          $ref: "#/components/schemas/Choice"

    ChapterVote:
      type: object
      properties:
        id:
          type: string
          example: "vote-uuid"
        room_id:
          type: string
          example: "room-uuid"
        chapter_id:
          type: string
          example: "chapter-uuid"
        user_id:
          type: string
          example: "user-uuid"
        choice:
          $ref: "#/components/schemas/Choice"

    LeaderVote:
      type: object
      properties:
        id:
          type: string
          example: "leader-vote-uuid"
        room_id:
          type: string
          example: "room-uuid"
        voter_user_id:
          type: string
          example: "user-uuid"
        choice:
          $ref: "#/components/schemas/Choice"
        weight:
          type: number
          format: float
          example: 1.2
        created_at:
          type: string
          format: date-time

    LeaderVoteRequest:
      type: object
      required: [choice]
      properties:
        choice:
          $ref: "#/components/schemas/Choice"
          description: "A = Seongyeol, B = Jaemyeon"

    FinalResolveResponse:
      type: object
      properties:
        leader:
          type: string
          enum: [SEONGYEOL, JAEMYEON]
        mvp:
          type: object
          properties:
            userId:
              type: string
            nickname:
              type: string
              nullable: true
            score:
              type: number
              format: float

    FinalResultResponse:
      type: object
      properties:
        leader:
          type: string
          enum: [SEONGYEOL, JAEMYEON]
        totals:
          type: object
          properties:
            A:
              type: number
              format: float
            B:
              type: number
              format: float

    Question:
      type: object
      properties:
        id:
          type: integer
          example: 12
        chapter:
          type: integer
          example: 3
        qnum:
          type: integer
          example: 7
        is_final:
          type: boolean
          example: false
        content:
          type: string
          example: "ì§ˆë¬¸ ë‚´ìš©"

    LegacyResolveChapterResponse:
      oneOf:
        - type: object
          properties:
            ok:
              type: boolean
            type:
              type: string
              enum: [chapter]
            roomId:
              type: string
            question:
              $ref: "#/components/schemas/Question"
            votes:
              type: object
              properties:
                a:
                  type: integer
                b:
                  type: integer
            winner:
              type: string
              enum: [A, B]
            reward:
              type: number
              format: float
            next_qnum:
              type: integer
        - type: object
          properties:
            ok:
              type: boolean
            type:
              type: string
              enum: [final]
            roomId:
              type: string
            question:
              $ref: "#/components/schemas/Question"
            votes:
              type: object
              properties:
                a_count:
                  type: integer
                b_count:
                  type: integer
            average_score:
              type: object
              properties:
                a:
                  type: number
                  format: float
                b:
                  type: number
                  format: float
            winner:
              type: string
              enum: [A, B]
            room_status:
              type: string
              example: resolved

paths:
  /health:
    get:
      summary: Health check
      responses:
        "200":
          description: OK
          content:
            text/plain:
              schema:
                $ref: "#/components/schemas/HealthResponse"

  /__debug/jwt:
    get:
      summary: JWT ë””ì½”ë”© í™•ì¸ (ë””ë²„ê·¸)
      tags: [Auth]
      security:
        - bearerAuth: []
      responses:
        "200":
          description: ë””ì½”ë”© ì„±ê³µ
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok:
                    type: boolean
                  decoded:
                    type: object
        "400":
          description: Bearer í† í° ëˆ„ë½
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: í† í° ê²€ì¦ ì‹¤íŒ¨
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /auth/google:
    get:
      summary: Google OAuth ì‹œì‘
      tags: [Auth]
      responses:
        "302":
          description: Google ì¸ì¦ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
          headers:
            Location:
              schema:
                type: string

  /auth/google/callback:
    get:
      summary: Google OAuth ì½œë°±
      tags: [Auth]
      description: |
        ì„±ê³µ ì‹œ access_token/refresh_token ì¿ í‚¤ë¥¼ ì„¸íŒ…í•˜ê³ 
        í”„ë¡ íŠ¸(/play)ë¡œ ì´ë™í•˜ëŠ” HTMLì„ ë°˜í™˜í•©ë‹ˆë‹¤.
      responses:
        "200":
          description: HTML ì‘ë‹µ
          content:
            text/html:
              schema:
                type: string
        "400":
          description: ì˜ëª»ëœ code
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: ì„œë²„ ì˜¤ë¥˜
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /auth/dev/login:
    post:
      summary: ê°œë°œìš© ë¡œê·¸ì¸ (í”„ë¡œë•ì…˜ ì°¨ë‹¨)
      tags: [Auth]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [email]
              properties:
                email:
                  type: string
                  example: "user@example.com"
      responses:
        "200":
          description: í† í° ë°œê¸‰
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AuthTokens"
        "400":
          description: ì´ë©”ì¼ ëˆ„ë½
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: ìœ ì € ì—†ìŒ ë˜ëŠ” í”„ë¡œë•ì…˜ ì°¨ë‹¨
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /auth/me:
    get:
      summary: ë‚´ ì •ë³´ ì¡°íšŒ
      tags: [Auth]
      security:
        - bearerAuth: []
      responses:
        "200":
          description: ì¸ì¦ëœ ìœ ì € ì •ë³´
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AuthMeResponse"
        "401":
          description: ì¸ì¦ ì‹¤íŒ¨
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /rooms:
    post:
      summary: ë°© ìƒì„±
      tags: [Room]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateRoomRequest"
      responses:
        "201":
          description: ë°© ìƒì„± ì„±ê³µ
          content:
            application/json:
              schema:
                type: object
                properties:
                  room:
                    $ref: "#/components/schemas/Room"
        "401":
          description: ì¸ì¦ ì‹¤íŒ¨
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "422":
          description: ì˜ëª»ëœ capacity/nickname
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

    get:
      summary: ë°© ëª©ë¡ ì¡°íšŒ
      tags: [Room]
      description: |
        í˜„ì¬ ì½”ë“œì—ëŠ” ë™ì¼í•œ GET /rooms ë¼ìš°íŠ¸ê°€ ë‘ ê°œ ì¡´ì¬í•©ë‹ˆë‹¤.
        ìƒë‹¨ ë¼ìš°íŠ¸ê°€ ë¨¼ì € ì‘ë‹µí•  ê²½ìš° { ok: true }ê°€ ë°˜í™˜ë  ìˆ˜ ìˆìœ¼ë‹ˆ
        í”„ë¡ íŠ¸ì—ì„œ ì‹¤ì œ ì‘ë‹µì„ í™•ì¸í•´ì£¼ì„¸ìš”.
      parameters:
        - in: query
          name: status
          schema:
            type: string
          description: ìƒíƒœ í•„í„° (ì˜ˆ: WAITING, PLAYING, FINISHED)
        - in: query
          name: minPlayers
          schema:
            type: integer
          description: ìµœì†Œ ì°¸ê°€ì ìˆ˜
        - in: query
          name: onlyJoinable
          schema:
            type: boolean
          description: trueë©´ WAITING ìƒíƒœë§Œ
      responses:
        "200":
          description: ë°© ëª©ë¡
          content:
            application/json:
              schema:
                type: object
                properties:
                  rooms:
                    type: array
                    items:
                      $ref: "#/components/schemas/RoomListItem"
        "500":
          description: ì¡°íšŒ ì‹¤íŒ¨
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /rooms/{roomId}/join:
    post:
      summary: ë°© ì°¸ì—¬
      tags: [Room]
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roomId
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/JoinRoomRequest"
      responses:
        "201":
          description: ë°© ì°¸ì—¬ ì„±ê³µ
          content:
            application/json:
              schema:
                type: object
                properties:
                  player:
                    $ref: "#/components/schemas/Player"
        "409":
          description: ì¤‘ë³µ ì°¸ê°€/ë°© ê½‰ì°¸/ìƒíƒœ ë¶ˆê°€
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /rooms/{roomId}:
    get:
      summary: ë°© ìƒì„¸ ì¡°íšŒ
      tags: [Room]
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roomId
          required: true
          schema:
            type: string
      responses:
        "200":
          description: ë°© ì •ë³´
          content:
            application/json:
              schema:
                type: object
                properties:
                  room:
                    $ref: "#/components/schemas/Room"
        "403":
          description: ë©¤ë²„ê°€ ì•„ë‹ ë•Œ
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: ë°© ì—†ìŒ
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /rooms/{roomId}/players:
    get:
      summary: ë°© ì°¸ì—¬ì ëª©ë¡ ì¡°íšŒ
      tags: [Room]
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roomId
          required: true
          schema:
            type: string
      responses:
        "200":
          description: ì°¸ì—¬ì ë¦¬ìŠ¤íŠ¸
          content:
            application/json:
              schema:
                type: object
                properties:
                  players:
                    type: array
                    items:
                      $ref: "#/components/schemas/Player"

  /rooms/{roomId}/game/start:
    post:
      summary: ê²Œì„ ì‹œì‘
      tags: [Game]
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roomId
          required: true
          schema:
            type: string
      responses:
        "200":
          description: ì‹œì‘ ì„±ê³µ
          content:
            application/json:
              schema:
                type: object
                properties:
                  state:
                    $ref: "#/components/schemas/GameState"
        "403":
          description: ë°©ì¥ì´ ì•„ë‹˜
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "409":
          description: ì¡°ê±´ ë¶ˆì¶©ì¡± (ì¸ì›ìˆ˜/ìƒíƒœ)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /rooms/{roomId}/game/state:
    get:
      summary: ê²Œì„ ìƒíƒœ ì¡°íšŒ
      tags: [Game]
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roomId
          required: true
          schema:
            type: string
      responses:
        "200":
          description: í˜„ì¬ ê²Œì„ ìƒíƒœ
          content:
            application/json:
              schema:
                type: object
                properties:
                  state:
                    $ref: "#/components/schemas/GameState"
        "409":
          description: ê²Œì„ ë¯¸ì‹œì‘
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /rooms/{roomId}/chapters:
    get:
      summary: ì±•í„° ëª©ë¡ ì¡°íšŒ
      tags: [Chapter]
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roomId
          required: true
          schema:
            type: string
      responses:
        "200":
          description: ì±•í„° ë¦¬ìŠ¤íŠ¸
          content:
            application/json:
              schema:
                type: object
                properties:
                  chapters:
                    type: array
                    items:
                      $ref: "#/components/schemas/Chapter"

  /rooms/{roomId}/chapters/current:
    get:
      summary: í˜„ì¬ ì±•í„° ì¡°íšŒ (game ëª¨ë“ˆ)
      tags: [Chapter]
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roomId
          required: true
          schema:
            type: string
      responses:
        "200":
          description: í˜„ì¬ ì±•í„°
          content:
            application/json:
              schema:
                type: object
                properties:
                  chapter:
                    $ref: "#/components/schemas/Chapter"

  /rooms/{roomId}/chapters/{chapterId}/vote:
    post:
      summary: ì±•í„° íˆ¬í‘œ
      tags: [Vote]
      description: |
        ì´ APIëŠ” íˆ¬í‘œë§Œ ì €ì¥í•©ë‹ˆë‹¤.
        âš ï¸ ê²°ê³¼ í™•ì •ì€ ë°©ì¥ì´ /rooms/{roomId}/chapters/{chapterId}/resolve ë¥¼ í˜¸ì¶œí•´ì•¼ í•©ë‹ˆë‹¤.
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roomId
          required: true
          schema:
            type: string
        - in: path
          name: chapterId
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/VoteRequest"
      responses:
        "201":
          description: íˆ¬í‘œ ì™„ë£Œ
          content:
            application/json:
              schema:
                type: object
                properties:
                  vote:
                    $ref: "#/components/schemas/ChapterVote"
        "409":
          description: ì¤‘ë³µ íˆ¬í‘œ/ì§„í–‰ ë¶ˆê°€
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /rooms/{roomId}/chapters/{chapterId}/resolve:
    post:
      summary: ì±•í„° ê²°ê³¼ í™•ì • (ë°©ì¥ ì „ìš©)
      tags: [Chapter]
      description: |
        ğŸ”’ ë°©ì¥ ì „ìš© ì—”ë“œí¬ì¸íŠ¸ì…ë‹ˆë‹¤.
        ì±•í„° íˆ¬í‘œë¥¼ ì§‘ê³„í•˜ê³  ë‹¤ìŒ ì±•í„° ë˜ëŠ” FINAL_VOTE ë‹¨ê³„ë¡œ ì§„í–‰í•©ë‹ˆë‹¤.
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roomId
          required: true
          schema:
            type: string
        - in: path
          name: chapterId
          required: true
          schema:
            type: string
      responses:
        "200":
          description: ê²Œì„ ìƒíƒœ ì—…ë°ì´íŠ¸
          content:
            application/json:
              schema:
                type: object
                properties:
                  state:
                    $ref: "#/components/schemas/GameState"

  /rooms/{roomId}/chapters/{chapterId}/votes:
    get:
      summary: ì±•í„° íˆ¬í‘œ ëª©ë¡ ì¡°íšŒ
      tags: [Vote]
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roomId
          required: true
          schema:
            type: string
        - in: path
          name: chapterId
          required: true
          schema:
            type: string
      responses:
        "200":
          description: íˆ¬í‘œ ëª©ë¡
          content:
            application/json:
              schema:
                type: object
                properties:
                  votes:
                    type: array
                    items:
                      $ref: "#/components/schemas/ChapterVote"

  /rooms/{roomId}/final/leader-vote:
    post:
      summary: ë¦¬ë” íˆ¬í‘œ
      tags: [Final]
      description: |
        ì´ APIëŠ” ë¦¬ë” íˆ¬í‘œë§Œ ì €ì¥í•©ë‹ˆë‹¤.
        âš ï¸ ìµœì¢… ê²°ê³¼ í™•ì •ì€ ë°©ì¥ì´ /rooms/{roomId}/final/resolve ë¥¼ í˜¸ì¶œí•´ì•¼ í•©ë‹ˆë‹¤.
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roomId
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LeaderVoteRequest"
      responses:
        "201":
          description: ë¦¬ë” íˆ¬í‘œ ì™„ë£Œ
          content:
            application/json:
              schema:
                type: object
                properties:
                  vote:
                    $ref: "#/components/schemas/LeaderVote"
        "409":
          description: ì¤‘ë³µ íˆ¬í‘œ/FINAL ë‹¨ê³„ ì•„ë‹˜
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /rooms/{roomId}/final/resolve:
    post:
      summary: ìµœì¢… ê²°ê³¼ í™•ì • (ë°©ì¥ ì „ìš©)
      tags: [Final]
      description: |
        ğŸ”’ ë°©ì¥ ì „ìš© ì—”ë“œí¬ì¸íŠ¸ì…ë‹ˆë‹¤.
        ë¦¬ë”(ê°€ì¤‘ì¹˜ í•©ì‚°)ì™€ MVPë¥¼ í™•ì •í•˜ê³  ê²Œì„ ìƒíƒœë¥¼ FINISHEDë¡œ ë³€ê²½í•©ë‹ˆë‹¤.
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roomId
          required: true
          schema:
            type: string
      responses:
        "200":
          description: ìµœì¢… ê²°ê³¼
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FinalResolveResponse"

  /rooms/{roomId}/final/result:
    get:
      summary: ìµœì¢… ê²°ê³¼ ì¡°íšŒ
      tags: [Final]
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roomId
          required: true
          schema:
            type: string
      responses:
        "200":
          description: ìµœì¢… ê²°ê³¼
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FinalResultResponse"
        "409":
          description: ê²Œì„ ë¯¸ì¢…ë£Œ
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /rooms/{roomId}/leaderboard:
    get:
      summary: ë¦¬ë”ë³´ë“œ ì¡°íšŒ
      tags: [Leaderboard]
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roomId
          required: true
          schema:
            type: string
      responses:
        "200":
          description: ì ìˆ˜ ë‚´ë¦¼ì°¨ìˆœ ë¦¬ìŠ¤íŠ¸
          content:
            application/json:
              schema:
                type: object
                properties:
                  players:
                    type: array
                    items:
                      $ref: "#/components/schemas/Player"

  /rooms/rooms/{roomId}/chapters/resolve:
    post:
      summary: (Legacy) ì±•í„° ê²°ê³¼ í™•ì •
      tags: [ChaptersLegacy]
      description: |
        chapters.controllerëŠ” app.use("/rooms", router)ë¡œ ë§ˆìš´íŠ¸ë˜ì–´
        ì‹¤ì œ í˜¸ì¶œ ê²½ë¡œëŠ” /rooms/rooms/{roomId}/chapters/resolve ì…ë‹ˆë‹¤.
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roomId
          required: true
          schema:
            type: string
      responses:
        "200":
          description: ì±•í„° ë˜ëŠ” FINAL ê²°ê³¼
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LegacyResolveChapterResponse"

  /rooms/rooms/{roomId}/chapters/current:
    get:
      summary: (Legacy) í˜„ì¬ ì§ˆë¬¸ ì¡°íšŒ
      tags: [ChaptersLegacy]
      description: app.use("/rooms") ë§ˆìš´íŠ¸ë¡œ ì¸í•´ /rooms/rooms ê²½ë¡œ
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roomId
          required: true
          schema:
            type: string
      responses:
        "200":
          description: í˜„ì¬ ì§ˆë¬¸
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Question"

  /rooms/rooms/{roomId}/chapters/{questionId}/vote:
    post:
      summary: (Legacy) í˜„ì¬ ì§ˆë¬¸ íˆ¬í‘œ
      tags: [ChaptersLegacy]
      description: app.use("/rooms") ë§ˆìš´íŠ¸ë¡œ ì¸í•´ /rooms/rooms ê²½ë¡œ
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roomId
          required: true
          schema:
            type: string
        - in: path
          name: questionId
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [decision]
              properties:
                decision:
                  type: string
                  enum: [A, B]
      responses:
        "201":
          description: íˆ¬í‘œ ì™„ë£Œ
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok:
                    type: boolean
                    example: true
